[{"id":"b6f275f1.f50b78","type":"tab","label":"Main","disabled":false,"info":""},{"id":"9e2c603a.858fe","type":"tab","label":"System","disabled":false,"info":""},{"id":"b9aee244.570dc","type":"tab","label":"Relay","disabled":false,"info":""},{"id":"9a56a685.0b3558","type":"tab","label":"Flow Assorbimenti","disabled":false,"info":""},{"id":"9baf0a1c.2eb568","type":"tab","label":"Telegram","disabled":false,"info":""},{"id":"7f63de28.637aa","type":"tab","label":"Sonoff","disabled":false,"info":""},{"id":"2bdcdf69.ad913","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"86a1cd35.744c2","type":"mqtt-broker","z":null,"name":"toa","broker":"192.168.1.222","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"be48502d.a2f1f","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"49086774.d24f58","type":"ui_tab","name":"Tab 1","icon":"dashboard","order":1},{"id":"4833e069.009da","type":"chatbot-telegram-node","z":"","botname":"Tanzo Office Automation","usernames":"","providerToken":"","polling":"1000","store":"","log":"","parseMode":"","debug":false},{"id":"619c3cbb.873b84","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"877fb05b.8a383","type":"ui_tab","z":"","name":"Denkovi Dashboard","icon":"dashboard"},{"id":"e0926b23.e33988","type":"mqtt out","z":"b6f275f1.f50b78","name":"","topic":"","qos":"","retain":"","broker":"86a1cd35.744c2","x":590,"y":420,"wires":[]},{"id":"7f774513.6aeffc","type":"inject","z":"b6f275f1.f50b78","name":"","topic":"toa/cm3panel","payload":"{\"cmd\":\"clock_off\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":200,"y":420,"wires":[["e0926b23.e33988"]]},{"id":"56f67e92.7fd16","type":"inject","z":"b6f275f1.f50b78","name":"","topic":"toa/cm3panel","payload":"{\"cmd\":\"clock_on\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":200,"y":480,"wires":[["e0926b23.e33988"]]},{"id":"b320bbbe.bee5b8","type":"inject","z":"b6f275f1.f50b78","name":"","topic":"","payload":"Un messaggio qualsiasi","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":196,"y":998,"wires":[["c2fc452.15aceb8"]]},{"id":"cb1809b3.1c8dd8","type":"inject","z":"b6f275f1.f50b78","name":"All ON","topic":"","payload":"255","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":125,"y":650,"wires":[["11473bcb.d53864"]]},{"id":"b6d478c9.686288","type":"mqtt out","z":"b6f275f1.f50b78","name":"","topic":"","qos":"","retain":"","broker":"86a1cd35.744c2","x":578,"y":677,"wires":[]},{"id":"11473bcb.d53864","type":"function","z":"b6f275f1.f50b78","name":"sendLoop","func":"var outputMsgs = [];\n\nfor (a=0;a<=15;a++) {\n    outputMsgs.push({payload:msg.payload,topic:\"toa/light/\" + a + \"/setval\"});\n}\n\nreturn [outputMsgs];\n","outputs":1,"noerr":0,"x":298,"y":677,"wires":[["b6d478c9.686288"]]},{"id":"b4fd0ace.d29ee8","type":"inject","z":"b6f275f1.f50b78","name":"All OFF","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":705,"wires":[["11473bcb.d53864"]]},{"id":"f9221e42.59702","type":"inject","z":"b6f275f1.f50b78","name":"Init","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":110,"y":60,"wires":[["c3e47af2.e06658"]]},{"id":"c3e47af2.e06658","type":"function","z":"b6f275f1.f50b78","name":"LightInit","func":"var light_state = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\nvar outputMsgs = [];\n\nglobal.set('light_state',light_state);\n\nfor (i=0;i<light_state.length;i++) {\n    outputMsgs.push({payload:light_state[i],topic:\"toa/lights/\" + i + \"/set_value\"});\n}\nreturn [outputMsgs];\n","outputs":1,"noerr":0,"x":260,"y":60,"wires":[["d0c11687.5b4878"]]},{"id":"d0c11687.5b4878","type":"mqtt out","z":"b6f275f1.f50b78","name":"","topic":"","qos":"","retain":"","broker":"86a1cd35.744c2","x":410,"y":60,"wires":[]},{"id":"1a714fdc.c4cf5","type":"mqtt in","z":"b6f275f1.f50b78","name":"getval","topic":"toa/light/+/getval","qos":"2","broker":"86a1cd35.744c2","x":90,"y":140,"wires":[["9c4facc9.1591f"]]},{"id":"9c4facc9.1591f","type":"function","z":"b6f275f1.f50b78","name":"current_val","func":"light_state=global.get('light_state');\ntopic=msg.topic\nid=parseInt(topic.split(\"/\")[2]);\nmsg.payload=light_state[id];\nmsg.topic=\"toa/lights/\" + id + \"/current_val\";\n\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":140,"wires":[["44cc99e4.9b7fe8"]]},{"id":"44cc99e4.9b7fe8","type":"mqtt out","z":"b6f275f1.f50b78","name":"","topic":"","qos":"","retain":"true","broker":"86a1cd35.744c2","x":410,"y":140,"wires":[]},{"id":"72814bf.a675fb4","type":"inject","z":"b6f275f1.f50b78","name":"Golden bridge","topic":"toa/cm3panel","payload":"{\"cmd\":\"loadvideo\",\"value\":\"goldenbridge.mp4\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":270,"y":540,"wires":[["e0926b23.e33988"]]},{"id":"8e2433a3.7f622","type":"inject","z":"b6f275f1.f50b78","name":"Skyline","topic":"toa/cm3panel","payload":"{\"cmd\":\"loadvideo\",\"value\":\"skyline.mp4\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":290,"y":580,"wires":[["e0926b23.e33988"]]},{"id":"aff06c68.5058e","type":"inject","z":"b6f275f1.f50b78","name":"Singapore","topic":"toa/cm3panel","payload":"{\"cmd\":\"loadvideo\",\"value\":\"singapore.mp4\"}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"240","x":310,"y":620,"wires":[["e0926b23.e33988"]]},{"id":"c2fc452.15aceb8","type":"play audio","z":"b6f275f1.f50b78","name":"","voice":"1","x":591,"y":1001,"wires":[]},{"id":"93990fe0.a5145","type":"inject","z":"9e2c603a.858fe","name":"Restart Chromium","topic":"","payload":"sudo systemctl restart chromium","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":235,"y":190,"wires":[["92ee472c.dc0e68"]]},{"id":"92ee472c.dc0e68","type":"mqtt out","z":"9e2c603a.858fe","name":"","topic":"toa/cm3shell","qos":"","retain":"","broker":"86a1cd35.744c2","x":530,"y":175,"wires":[]},{"id":"5d5385c5.6d4c6c","type":"inject","z":"9e2c603a.858fe","name":"Reboot","topic":"","payload":"sudo reboot","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":195,"y":150,"wires":[["92ee472c.dc0e68"]]},{"id":"e067f04a.a5bf","type":"inject","z":"9e2c603a.858fe","name":"Halt","topic":"","payload":"sudo halt","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":195,"y":110,"wires":[["92ee472c.dc0e68"]]},{"id":"5c7c9eea.0bb2a","type":"inject","z":"b9aee244.570dc","name":"ON","topic":"toa/lights/6/set_value","payload":"1","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":130,"wires":[["8c7724f5.b5fd28"]]},{"id":"e0e15875.0c8bd8","type":"inject","z":"b9aee244.570dc","name":"OFF","topic":"toa/lights/6/set_value","payload":"0","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":165,"wires":[["8c7724f5.b5fd28"]]},{"id":"329c8ba5.fbf5d4","type":"http request","z":"b9aee244.570dc","name":"","method":"GET","ret":"txt","url":"","tls":"","x":1315,"y":125,"wires":[[]]},{"id":"dede6718.ce4948","type":"mqtt in","z":"b9aee244.570dc","name":"","topic":"toa/lights/+/set_value","qos":"2","broker":"86a1cd35.744c2","x":930,"y":180,"wires":[["8f5f167.1a9f3e8"]]},{"id":"aa8c1c05.85dc7","type":"inject","z":"b9aee244.570dc","name":"ON","topic":"toa/lights/16/set_value","payload":"1","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":35,"wires":[["8c7724f5.b5fd28"]]},{"id":"d0082c11.f6e27","type":"inject","z":"b9aee244.570dc","name":"OFF","topic":"toa/lights/16/set_value","payload":"0","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":70,"wires":[["8c7724f5.b5fd28"]]},{"id":"8c7724f5.b5fd28","type":"mqtt out","z":"b9aee244.570dc","name":"","topic":"","qos":"","retain":"false","broker":"86a1cd35.744c2","x":830,"y":290,"wires":[]},{"id":"8f5f167.1a9f3e8","type":"function","z":"b9aee244.570dc","name":"Filtro relÃ¨","func":"var res = msg.topic.split(\"/\");\nvar msg1={};\n\nlight_id=parseInt(res[2]);\nlight_value=parseInt(msg.payload);\n\nif (light_id>=1 && light_id<=16) {\n\n\n    relay_id=light_id;\n    \n    if (light_value===0)\n        relay_value=0;\n    else    \n        relay_value=1;\n    \n    msg.url = \"http://192.168.1.107:80/current_state.json?pw=admin&Relay\" + relay_id + \"=\" + relay_value;\n\n\n    msg1.topic=\"toa/lights/\" + light_id + \"/current_value\";\n    msg1.payload=light_value;\n\n    return [msg,msg1];\n}  \n","outputs":2,"noerr":0,"x":1125,"y":180,"wires":[["329c8ba5.fbf5d4"],["bb296c75.6d0f6"]]},{"id":"6dd8d371.d8fbec","type":"comment","z":"9e2c603a.858fe","name":"CM3-Panel","info":"","x":180,"y":55,"wires":[]},{"id":"1b542fa7.b5108","type":"comment","z":"9e2c603a.858fe","name":"CM3-Home","info":"","x":185,"y":385,"wires":[]},{"id":"2ab750f0.3c471","type":"exec","z":"9e2c603a.858fe","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":445,"y":495,"wires":[[],[],[]]},{"id":"8bce2dad.5ed52","type":"inject","z":"9e2c603a.858fe","name":"Halt","topic":"","payload":"sudo halt","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":205,"y":495,"wires":[["2ab750f0.3c471"]]},{"id":"412bcf5d.0a197","type":"inject","z":"b9aee244.570dc","name":"ON","topic":"toa/lights/7/set_value","payload":"1","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":225,"wires":[["8c7724f5.b5fd28"]]},{"id":"62a6cae8.112ab4","type":"inject","z":"b9aee244.570dc","name":"OFF","topic":"toa/lights/7/set_value","payload":"0","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":260,"wires":[["8c7724f5.b5fd28"]]},{"id":"eeaeff4c.10c08","type":"rpi-gpio in","z":"b9aee244.570dc","name":"WC uomini","pin":"24","intype":"tri","debounce":"25","read":false,"x":220,"y":875,"wires":[["2c5f2059.56eca"]]},{"id":"20759198.e3345e","type":"rpi-gpio in","z":"b9aee244.570dc","name":"WC donne","pin":"26","intype":"tri","debounce":"25","read":false,"x":220,"y":915,"wires":[["105a48c8.0920e7"]]},{"id":"2c5f2059.56eca","type":"function","z":"b9aee244.570dc","name":"","func":"var wc_uomini = flow.get('wc_uomini')||0;\n\nif (msg.payload===0) {\n    if (wc_uomini===0) {\n        msg.topic=\"toa/lights/6/set_value\";\n        msg.payload=1;\n        wc_uomini=1;\n        flow.set('wc_uomini',wc_uomini)\n    } else {\n        msg.topic=\"toa/lights/6/set_value\";\n        msg.payload=0;\n        wc_uomini=0;\n        flow.set('wc_uomini',wc_uomini)\n    }\n} else {\n    msg.payload=null;\n}\n\nreturn msg;    \n\n","outputs":1,"noerr":0,"x":355,"y":875,"wires":[["8c7724f5.b5fd28"]]},{"id":"105a48c8.0920e7","type":"function","z":"b9aee244.570dc","name":"","func":"var wc_donne = flow.get('wc_donne')||0;\n\nif (msg.payload===0) {\n    if (wc_donne===0) {\n        msg.topic=\"toa/light/7/setval\";\n        msg.payload=1;\n        wc_donne=1;\n        flow.set('wc_donne',wc_donne)\n    } else {\n        msg.topic=\"toa/light/7/setval\";\n        msg.payload=0;\n        wc_donne=0;\n        flow.set('wc_donne',wc_donne)\n    }\n} else {\n    msg.payload=null;\n}\n\nreturn msg;    \n\n","outputs":1,"noerr":0,"x":355,"y":915,"wires":[["8c7724f5.b5fd28"]]},{"id":"46f037b4.614358","type":"mqtt in","z":"9a56a685.0b3558","name":"","topic":"toa/assorbimenti/VL1-FT","qos":"2","broker":"86a1cd35.744c2","x":185,"y":445,"wires":[[]]},{"id":"6950ad7d.a8f2c4","type":"mqtt in","z":"9a56a685.0b3558","name":"","topic":"toa/assorbimenti/VL2-FT","qos":"2","broker":"86a1cd35.744c2","x":185,"y":495,"wires":[[]]},{"id":"4ca4343.39f4fcc","type":"mqtt in","z":"9a56a685.0b3558","name":"","topic":"toa/assorbimenti/VL3-FT","qos":"2","broker":"86a1cd35.744c2","x":185,"y":545,"wires":[[]]},{"id":"fd6bc618.e21668","type":"comment","z":"9a56a685.0b3558","name":"Misuratore trifase Fotovoltaico","info":"","x":195,"y":405,"wires":[]},{"id":"73194d8d.03fff4","type":"mqtt in","z":"9a56a685.0b3558","name":"","topic":"toa/assorbimenti/VL1-GEN","qos":"2","broker":"86a1cd35.744c2","x":185,"y":75,"wires":[[]]},{"id":"352894b7.3ffc7c","type":"mqtt in","z":"9a56a685.0b3558","name":"","topic":"toa/assorbimenti/VL2-GEN","qos":"2","broker":"86a1cd35.744c2","x":185,"y":125,"wires":[[]]},{"id":"17c28da2.96cdc2","type":"mqtt in","z":"9a56a685.0b3558","name":"","topic":"toa/assorbimenti/VL3-GEN","qos":"2","broker":"86a1cd35.744c2","x":185,"y":175,"wires":[[]]},{"id":"f2043e1c.57036","type":"comment","z":"9a56a685.0b3558","name":"Misuratore trifase QE Generale","info":"","x":205,"y":35,"wires":[]},{"id":"707fac7f.720174","type":"mqtt in","z":"9a56a685.0b3558","name":"","topic":"toa/assorbimenti/KW1-GEN","qos":"2","broker":"86a1cd35.744c2","x":195,"y":230,"wires":[[]]},{"id":"aa37d9ce.edc8c8","type":"mqtt in","z":"9a56a685.0b3558","name":"","topic":"toa/assorbimenti/KW2-GEN","qos":"2","broker":"86a1cd35.744c2","x":195,"y":280,"wires":[[]]},{"id":"f4758f7f.62fb7","type":"mqtt in","z":"9a56a685.0b3558","name":"","topic":"toa/assorbimenti/KW3-GEN","qos":"2","broker":"86a1cd35.744c2","x":195,"y":330,"wires":[[]]},{"id":"93350d2e.d0e06","type":"mqtt in","z":"9a56a685.0b3558","name":"","topic":"toa/assorbimenti/KWL1-FT","qos":"2","broker":"86a1cd35.744c2","x":185,"y":600,"wires":[[]]},{"id":"31e05043.e8306","type":"mqtt in","z":"9a56a685.0b3558","name":"","topic":"toa/assorbimenti/KWL2-FT","qos":"2","broker":"86a1cd35.744c2","x":185,"y":650,"wires":[[]]},{"id":"74faef4f.9533","type":"mqtt in","z":"9a56a685.0b3558","name":"","topic":"toa/assorbimenti/KWL3-FT","qos":"2","broker":"86a1cd35.744c2","x":185,"y":700,"wires":[[]]},{"id":"15b926ab.916c79","type":"inject","z":"b9aee244.570dc","name":"ON","topic":"toa/lights/3/set_value","payload":"1","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":315,"wires":[["8c7724f5.b5fd28"]]},{"id":"15c34850.5c9008","type":"inject","z":"b9aee244.570dc","name":"OFF","topic":"toa/lights/3/set_value","payload":"0","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":350,"wires":[["8c7724f5.b5fd28"]]},{"id":"a736cacf.3ab9f8","type":"comment","z":"b9aee244.570dc","name":"Stanza Verde","info":"","x":90,"y":40,"wires":[]},{"id":"40d8ee2b.63fe9","type":"comment","z":"b9aee244.570dc","name":"WC Uomini","info":"","x":90,"y":130,"wires":[]},{"id":"6b45950d.f406bc","type":"comment","z":"b9aee244.570dc","name":"WC Donne","info":"","x":95,"y":225,"wires":[]},{"id":"c4fd82f7.f3086","type":"comment","z":"b9aee244.570dc","name":"Scala","info":"","x":105,"y":315,"wires":[]},{"id":"da1ecdf9.5c62d","type":"comment","z":"b9aee244.570dc","name":"Pulsanti","info":"","x":210,"y":835,"wires":[]},{"id":"c462e887.a78fe8","type":"inject","z":"b9aee244.570dc","name":"ON","topic":"toa/lights/1/set_value","payload":"1","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":410,"wires":[["8c7724f5.b5fd28"]]},{"id":"c44fbf85.1dc29","type":"inject","z":"b9aee244.570dc","name":"OFF","topic":"toa/lights/1/set_value","payload":"0","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":445,"wires":[["8c7724f5.b5fd28"]]},{"id":"cb10a77a.877f98","type":"comment","z":"b9aee244.570dc","name":"Terrazzino","info":"","x":95,"y":410,"wires":[]},{"id":"f992ed09.bc56b","type":"inject","z":"b9aee244.570dc","name":"ON","topic":"toa/lights/2/set_value","payload":"1","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":505,"wires":[["8c7724f5.b5fd28"]]},{"id":"8cf232e9.c8815","type":"inject","z":"b9aee244.570dc","name":"OFF","topic":"toa/lights/2/set_value","payload":"0","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":540,"wires":[["8c7724f5.b5fd28"]]},{"id":"f4f79d38.92d5f","type":"comment","z":"b9aee244.570dc","name":"Terrazzone","info":"","x":100,"y":505,"wires":[]},{"id":"f1879a7.cab5b68","type":"mqtt out","z":"9baf0a1c.2eb568","name":"","topic":"toa/cm3panel","qos":"","retain":"true","broker":"86a1cd35.744c2","x":960,"y":120,"wires":[]},{"id":"2b01c1fd.5d838e","type":"function","z":"9baf0a1c.2eb568","name":"Telegram2mqtt","func":"content=msg.payload[\"content\"];\nmsg.payload={\"cmd\":\"message\",\"value\":content}\nnode.status({text:content});\nreturn msg;","outputs":1,"noerr":0,"x":575,"y":120,"wires":[["f1879a7.cab5b68"]]},{"id":"2c0215df.d9600a","type":"chatbot-telegram-receive","z":"9baf0a1c.2eb568","bot":"4833e069.009da","botProduction":"","x":155,"y":85,"wires":[["2b01c1fd.5d838e","8e00a2e5.52358","3990720b.9d8b1e"]]},{"id":"8e00a2e5.52358","type":"chatbot-telegram-send","z":"9baf0a1c.2eb568","bot":"4833e069.009da","botProduction":"","track":false,"passThrough":false,"outputs":0,"x":585,"y":165,"wires":[]},{"id":"3990720b.9d8b1e","type":"debug","z":"9baf0a1c.2eb568","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":565,"y":75,"wires":[]},{"id":"2454a37d.0c2bec","type":"inject","z":"7f63de28.637aa","name":"ON","topic":"","payload":"ON","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":95,"y":70,"wires":[["228b44ed.d86bac"]]},{"id":"a7c1866f.031518","type":"inject","z":"7f63de28.637aa","name":"OFF","topic":"","payload":"OFF","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":95,"y":110,"wires":[["228b44ed.d86bac"]]},{"id":"228b44ed.d86bac","type":"mqtt out","z":"7f63de28.637aa","name":"1273","topic":"cmnd/sonoff-1273/POWER","qos":"","retain":"","broker":"86a1cd35.744c2","x":265,"y":90,"wires":[]},{"id":"bb296c75.6d0f6","type":"mqtt out","z":"b9aee244.570dc","name":"","topic":"","qos":"","retain":"true","broker":"86a1cd35.744c2","x":1310,"y":280,"wires":[]},{"id":"92200da6.69dc8","type":"inject","z":"9baf0a1c.2eb568","name":"Welcome message","topic":"","payload":"Benvenuti in Acme Systems","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":365,"y":370,"wires":[["3faa6a18.17fb16"]]},{"id":"3faa6a18.17fb16","type":"function","z":"9baf0a1c.2eb568","name":"Text to JSON","func":"content=msg.payload;\nmsg.payload={\"cmd\":\"message\",\"value\":content}\nnode.status({text:content});\nreturn msg;","outputs":1,"noerr":0,"x":615,"y":370,"wires":[["f1879a7.cab5b68"]]}]